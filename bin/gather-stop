#!/bin/bash

BASE_DIR="$(dirname $(dirname $(readlink -f "$0")))"
PID_DIR="$BASE_DIR/pids"

mkdir -p $PID_DIR

KILL_PID=$(cat $PID_DIR/processes.pid)
if kill -0 $KILL_PID >/dev/null 2>&1; then
  echo "Stopping bin/processes ($KILL_PID)..."
  kill $KILL_PID
else
  echo "bin/processes not running ($KILL_PID)..."
fi

KILL_PID=$(cat $PID_DIR/diskstats.pid)
if kill -0 $KILL_PID >/dev/null 2>&1; then
  echo "Stopping bin/diskstats ($KILL_PID)..."
  kill $KILL_PID
else
  echo "bin/diskstats not running ($KILL_PID)..."
fi

echo
echo "Gathered information is in the samples/ directory."
